{% extends "base.html" %}
{% load static %}

{% block title %}ΚΔΚ | ΤΦ ΚΑΤΑΛΟΓΟΙ{% endblock %}

{% block extra_head %}
    <link rel="stylesheet" href="{% static 'css/katalogoi.css' %}">
{% endblock %}

{% block content %}
<div class="video-background">
    <video autoplay muted loop>
        <source src="{% static 'img/back_kepik.webm' %}" type="video/webm">
    </video>
</div>
<div class="main-content">
    <h1>Τηλεφωνικοί Κατάλογοι</h1>

    <!-- HARP Directory -->
    <div class="accordion-item">
        <button class="accordion-header" aria-expanded="false">
            Τηλεφωνικός Κατάλογος HARP <span class="accordion-icon">+</span>
        </button>
        <div class="accordion-content" hidden>
            <table>
                <thead>
                    <tr>
                        <th>Επιτελείο - Σχηματισμός</th>
                        <th>Α/Α (ανα σχηματισμό)</th>
                        <th>Ανταποκριτής</th>
                        <th>Αριθμός SIP</th>
                        <th>Συσκευή</th>
                    </tr>
                </thead>
                <tbody>
                    {% for entry in harp_entries %}
                    <tr>
                        <td>{{ entry.epiteleio_sximatismos }}</td>
                        <td>{{ entry.aa_ana_sximatismo }}</td>
                        <td>{{ entry.antapokritis }}</td>
                        <td>{{ entry.arithmos_sip }}</td>
                        <td>{{ entry.syskeyi }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <!-- VoSIP Directory -->
    <div class="accordion-item">
        <button class="accordion-header" aria-expanded="false">
            Τηλεφωνικός Κατάλογος VoSIP <span class="accordion-icon">+</span>
        </button>
        <div class="accordion-content" hidden>
            <table>
                <thead>
                    <tr>
                        <th>Επιτελείο - Σχηματισμός</th>
                        <th>Χρήστης</th>
                        <th>Αριθμός VoSIP</th>
                        <th>Παρατηρήσεις</th>
                    </tr>
                </thead>
                <tbody>
                    {% for entry in vosip_entries %}
                    <tr>
                        <td>{{ entry.epiteleio_sximatismos }}</td>
                        <td>{{ entry.xristis }}</td>
                        <td>{{ entry.arithmos_vosip }}</td>
                        <td>{{ entry.paratiriseis }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <!-- Κλειστό Τηλεφωνικό -->
    <div class="accordion-item">
        <button class="accordion-header" aria-expanded="false">
            Κλειστό Τηλεφωνικό <span class="accordion-icon">+</span>
        </button>
        <div class="accordion-content" hidden>
            <table>
                <thead>
                    <tr>
                        <th>Κατηγορία</th>
                        <th>Στοιχεία</th>
                        <th>Νούμερο</th>
                    </tr>
                </thead>
                <tbody>
                    {% for entry in klisto_entries %}
                    <tr>
                        <td>{{ entry.category }}</td>
                        <td>{{ entry.stoixeia }}</td>
                        <td>{{ entry.number }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

</div>

<script>
    function toggleAccordion(button) {
        const content = button.nextElementSibling;
        const icon = button.querySelector('.accordion-icon');
        const isExpanded = button.getAttribute('aria-expanded') === 'true';

        // Κλείσιμο όλων των accordions
        document.querySelectorAll('.accordion-header').forEach(btn => {
            btn.setAttribute('aria-expanded', 'false');
            btn.querySelector('.accordion-icon').textContent = '+';
            btn.nextElementSibling.setAttribute('hidden', '');
        });

        // Άνοιγμα του επιλεγμένου accordion αν δεν ήταν ήδη ανοιχτό
        if (!isExpanded) {
            button.setAttribute('aria-expanded', 'true');
            icon.textContent = '-';
            content.removeAttribute('hidden');
        }
    }

    // Προσθήκη event listeners στα accordion headers
    document.querySelectorAll('.accordion-header').forEach(button => {
        button.addEventListener('click', () => toggleAccordion(button));

        // Υποστήριξη πληκτρολογίου
        button.addEventListener('keypress', function(event) {
            if (event.key === 'Enter' || event.key === ' ') {
                event.preventDefault();
                toggleAccordion(button);
            }
        });
    });
</script>

{% endblock %}
